# Абстрактная фабрика 

Позволяет создавать **семейства связанных объектов**, не привязываясь к конкретным классам создаваемых объектов.(Через общий интерфейс фабрик)

## Применимость

 - Когда бизнес-логика программы должна работать с **разными видами связанных друг с другом продуктов**, не завися от конкретных классов продуктов.

   - Абстрактная фабрика скрывает от клиентского кода подробности того, как и какие конкретно объекты будут созданы. Но при этом клиентский код может работать со всеми типами создаваемых продуктов, так как их общий интерфейс был заранее определён.

 - Когда в программе **уже используется Фабричный метод**, но очередные изменения предполагают введение новых типов продуктов.

   - В хорошей программе, каждый класс отвечает только за одну вещь. **Если класс имеет слишком много фабричных методов**, они способны затуманить его основную функцию. Поэтому имеет смысл вынести всю логику создания продуктов в отдельную иерархию классов, применив абстрактную фабрику.

## Шаги реализации

1. Создайте таблицу соотношений типов продуктов к вариациям семейств продуктов.

2. Сведите все вариации продуктов к общим интерфейсам.

3. Определите **интерфейс абстрактной фабрики**. Он должен иметь **фабричные методы для создания каждого из типов продуктов**.

4. Создайте классы конкретных фабрик, реализовав интерфейс абстрактной фабрики. Этих классов должно быть столько же, сколько и вариаций семейств продуктов.

5. Измените код инициализации программы так, чтобы она создавала определённую фабрику и передавала её в клиентский код.

6. Замените в клиентском коде участки создания продуктов через конструктор вызовами соответствующих методов фабрики.

## Преимущества и недостатки

 | + | - |
 | ------ | ------ |
 |Гарантирует сочетаемость создаваемых продуктов.|Усложняет код программы за счёт **множества дополнительных классов**.
 |Избавляет клиентский код от привязки к конкретным классам продуктов.|Требует наличия всех типов продуктов в каждой вариации.
 |**Выделяет код производства продуктов** в одно место, упрощая поддержку кода.
 |Упрощает добавление новых продуктов в программу.
 |Реализует принцип [**Open/closed**][OCP].
 
 ## Отношения с другими паттернами
 
 Многие архитектуры начинаются с применения [**Фабричного метода**][Factory_Method] (более простого и расширяемого через подклассы) и эволюционируют в сторону **Абстрактной фабрики**, [**Прототипа**][Prototype] или [**Строителя**][Builder] (более гибких, но и более сложных).
 
 [**Строитель**][Builder] концентрируется на постройке сложных объектов шаг за шагом. **Абстрактная фабрика** специализируется на создании семейств связанных продуктов. [**Строитель**][Builder] возвращает продукт только после выполнения всех шагов, а **Абстрактная фабрика** возвращает продукт сразу же.
 
 Классы **Абстрактной фабрики** чаще всего реализуются с помощью [**Фабричного метода**][Factory_Method], хотя они могут быть построены и на основе [**Прототипа**][Prototype].
 
 **Абстрактная фабрика** может быть использована вместо [**Фасада**][Facade] для того, чтобы скрыть платформо-зависимые классы.
 
 **Абстрактная фабрика** может работать совместно с [**Мостом**][Bridge]. Это особенно полезно, если у вас есть абстракции, которые могут работать только с некоторыми из реализаций. В этом случае фабрика будет определять типы создаваемых абстракций и реализаций.
 
 **Абстрактная фабрика**, [**Строитель**][Builder] и [**Прототип**][Prototype] могут быть реализованы при помощи [**Одиночки**][Singleton].
 
 
[OCP]: </src/AdditionalDocs/SOLID/Open-Closed_principle.md>
 
 
[Abstract_Factory]: </src/Creational/Factorys/Abstract_Factory/Abstract_Factory.md>
[Abstract_Factory]: </src/Creational/Factorys/Factory_Method/Factory_Method.md>
[Builder]: </src/Creational/Builder/Builder.md>
[Prototype]: </src/Creational/Prototype/Prototype.md>
[Singleton]: </src/Creational/Singleton/Singleton.md>

[Adapter]: </src/Structural/Adapter/Adapter.md>
[Bridge]: </src/Structural/Bridge/Bridge.md>
[Composite]: </src/Structural/Composite/Composite.md>
[Decorator]: </src/Structural/Decorator/Decorator.md>
[Facade]: </src/Structural/Facade/Facade.md>
[Flyweight]: </src/Structural/Flyweight/Flyweight.md>
[Proxy]: </src/Structural/Proxy/Proxy.md>

[Chain_of_Responsibility]: </src/Behavioral/Chain_of_Responsibility/Chain_of_Responsibility.md>
[Command]: </src/Behavioral/Command/Command.md>
[Iterator]: </src/Behavioral/Iterator/Iterator.md>
[Mediator]: </src/Behavioral/Mediator/Mediator.md>
[Memento]: </src/Behavioral/Memento/Memento.md>
[Observer]: </src/Behavioral/Observer/Observer.md>
[State]: </src/Behavioral/State/State.md>
[Strategy]: </src/Behavioral/Strategy/Strategy.md>
[Template_Method]: </src/Behavioral/Template_Method/Template_Method.md>
[Visitor]: </src/Behavioral/Visitor/Visitor.md>

